<div class="frame primary-bg" data-page="faqs">
  <h1 class="title-banner"><%= @index_title %></h1>
  <%# breadcrumb 可選擇是否顯示，但勿刪 breadcrumb_schema 須使用 %>
  <% if @category.present? %>
    <% render "partials/breadcrumb", crumbs: [
      { text: @index_title, path: faqs_url },
      { text: @category.name_i18n, path: cate_faqs_url(faq_category: @category.slug) }
    ] %>
  <% else %>
    <% render "partials/breadcrumb", crumbs: [
      { text: @index_title, path: faqs_url }
    ] %>
  <% end %>
  <div class="container faqs-container">
    <div class="faqs-sidebar">
      <ul class="faqs-menu-items">
        <% @faq_categories.each do |category, v| %>
          <li class="faqs-menu-item <%= 'active' if params[:faq_category] == category.slug %>">
            <%= link_to category.name_i18n, cate_faqs_path(faq_category: category), class: 'faqs-menu-item-link active'  %>
          </li>
        <% end %>
      </ul>
    </div>
    <div class="faqs-main">
      <div class="faqs-accordion" id="accordion-<%= @category&.id %>">
        <% @faqs.each do |faq, i| %>
          <div class="faqs-item">
            <div class="faqs-title title-sm">
              <span><%= faq.title %></span>
            </div>
            <div class="faqs-content">
              <div class="custom-editor">
                <%= faq.content&.html_safe %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <%# pagination %>
  <div class="base-pagination">
    <%== pagy_bootstrap_nav(@pagy) if @pagy.pages > 1 %>
  </div>
</div>
<script type="module">
  $('.faqs-accordion .faqs-title').click(function(){
    $(this).parent('.faqs-item').toggleClass('active').siblings().removeClass('active').find('.faqs-content').slideUp(200);
    $(this).siblings('.faqs-content').slideToggle(200);
  });
</script>
